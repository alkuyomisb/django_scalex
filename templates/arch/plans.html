{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="" />
  <meta name="author" content="" />
  <title>TRA</title>
  <link rel="icon" href="{% static 'images/favicon.ico' %}" />
  <link rel="stylesheet" type="text/css" href="{% static 'css/font-awesome.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/bootstrap.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/mdb.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/owl.carousel.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/owl.theme.default.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/jquery.fancybox.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/hover.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/animate.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/aos.css' %}">
  <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}">

  <!-- range side -->
  <link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
  <link rel="stylesheet" href="/resources/demos/style.css">
  <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
  <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
</head>

<body>
  <section id="tabs">
    <div class="buttons text-left inline-block">



      <!-- plan and Promotions tabs -->
      <div class="tab">
        <button class="tablinks" onclick="openTab(event, 'plan')">plans</button>
        <button class="tablinks active" onclick="openTab(event, 'promotions')" id="defaultOpen">Promotions</button>
      </div>


      <!-- plan table -->
      <div id="plan" class="tabcontent">

        <!-- PRICE RANGE  DIALOG -->
        <div>
          <dialog id="DialogExample">
            <div class="modal-header">
              <h2 class="modal-title" id="exampleModalLabel">Choose Price Range</h2>
            </div>
            <p>
              <input type="text" id="amount" readonly style="border:0; color:#000000; font-weight:bold;">
            </p>
            <div id="slider-range"></div>
            <div class="modal-footer">
              <button id="hide" class="btn btn-filters">Close</button>
              <button type="button" class="btn btn-filters">Apply</button>
            </div>
          </dialog>
        </div>
        <!-- PRICE RINGE DIALOG -->

        <!-- DATE RINGE DIALOG -->
        <div>
          <dialog id="DialogDate">
            <div class="modal-header">
              <h2 class="modal-title" id="dateModalLabel">Choose Date Range</h2>
            </div>
            From :
            <input type="date" name="party" min="2020-04-01" max="2025-04-30" />
            To :
            <input type="date" name="party" min="2020-04-01" max="2025-04-30" />
            <div class="modal-footer">
              <button id="dateHide" class="btn btn-filters">Close</button>
              <button type="button" class="btn btn-filters">Apply</button>
            </div>
          </dialog>
        </div>

        <!-- DATE RINGE DIALOG -->


        <!-- filter -->
        <p class='display-inline-block'>
          <button class="btn btn-filters">
            <span class="fa fa-download mr-3"></span>
            DOWNLOAD
          </button>

          <select class="btn btn-filters">
            <option>Operator</option>
            <option value="Omantel">Omantel</option>
            <option value="Ooredoo">Ooredoo</option>
            <option value="Vodafone">Vodafone</option>
            <option value="RedBull">RedBull</option>
            <option value="Renna">Renna</option>
          </select>

          <select class="btn btn-filters">
            <option>Single or Bundle</option>
            <option value="Single">Single</option>
            <option value="bundle">Bundle</option>
          </select>

          <select class="btn btn-filters">
            <option>Service Type</option>
            <option value="Mobile">Mobile</option>
            <option value="Broadband">Fixed Broadband</option>
          </select>


          <button id="show" type="button" class="btn btn-filters">Price Range
          </button>

          <button id="dateShow" type="button" class="btn btn-filters">Date Range
          </button>
        </p>
        <!-- filter -->



        <div class="search-plan-table">
          <div class="table-responsive">
            <table class="table" cellspacing="0">
              <thead>
                <tr>
                  <th>
                    ISP
                  </th>
                  <th>
                    Package
                  </th>
                  <th>
                    Service
                  </th>
                  <th>
                    Plan
                  </th>

                  <th>
                    Price
                  </th>
                  <th>
                    Duration
                  </th>
                  <th>
                    Data Allowance
                  </th>
                  <th>
                    Flexi Minutes
                  </th>
                  <th>
                    Local Minutes
                  </th>
                  <th>
                    International Minutes
                  </th>
                  <th>
                    Fixed Line Minutes
                  </th>
                  <th>
                    SMS
                  </th>
                  <th>
                    Social Media Data
                  </th>


                  <th>
                    Download Speed
                  </th>
                  <th>
                    Upload Speed
                  </th>
                  <th>
                    World Roaming
                  </th>
                  <th>
                    Contract Duration
                  </th>
                  <th>
                    Status
                  </th>
                  <th style="width: 2px;">
                    ISP Link
                  </th>
                  <th>
                    Add-on Link
                  </th>

                </tr>
              </thead>
              <tbody>
                {% for plan in plans %}
                <tr>
                  <td>
                    {{plan.isp}}
                  </td>
                  <td>
                    {{plan.title}}
                  </td>
                  <td>
                    {{plan.service_type}}
                  </td>
                  <td>
                    {{plan.plan_type}}
                  </td>
                  <td>
                    {{ plan.price_value }} {{ plan.price_unit }}
                  </td>
                  <td>
                    {{plan.duration_value}} {{plan.duration_unit}}
                  </td>
                  <td>
                    {{plan.data_allowance_value}} {{plan.data_allowance_unit}}
                  </td>
                  <td>
                    {{plan.flexi_minutes}}
                  </td>
                  <td>
                    {{plan.local_minutes}}
                  </td>
                  <td>
                    {{plan.international_minutes}}
                  </td>
                  <td>
                    {{plan.fixed_line_minutes}}
                  </td>
                  <td>
                    {{plan.sms}}
                  </td>
                  <td>
                    {{plan.social_media_data_value}} {{plan.social_media_data_unit}}
                  </td>

                  <td>
                    {{plan.download_speed_value}} {{plan.download_speed_unit}}
                  </td>
                  <td>
                    {{plan.upload_speed_value}} {{plan.upload_speed_unit}}
                  </td>
                  <td>
                    {{plan.world_roaming_value}} {{plan.world_roaming_unit}}
                  </td>
                  <td>
                    {{plan.contract_duration_value}} {{plan.contract_duration_unit}}
                  </td>
                  <td>
                    {{plan.status}}
                  </td>
                  <td style="text-align: left; width: 2px;">
                    <a href="{{plan.link}}">{{plan.link}}</a>
                  </td>
                  <td>
                    <a href="{{plan.add_on_link}}"> {{plan.add_on_link}}</a>

                  </td>
                </tr>
                {%endfor%}

                {%for package in OoredooHalaSIMPackages%}
                <tr>
                  <td>2021-07-14</td>
                  <td>
                    {% ifchanged package.title%}{{package.title}}{% endifchanged %}
                  </td>
                  <td>
                    {% ifchanged package.price%}{{package.price}}{% endifchanged %}

                  </td>
                  <td>
                    <span>
                      {% ifchanged package.data%}{{package.data}}{% endifchanged %}

                    </span>
                  </td>
                  <td> {% ifchanged package.data%}{{package.duration}}{% endifchanged %}
                  </td>
                  <td> {% ifchanged package.IntlMins%}{{package.IntlMins}}{% endifchanged %}

                  </td>
                  <td> -
                    {% comment %} <span>
                      UNL/$10 Day Pass
                    </span> {% endcomment %}
                  </td>
                </tr>
                {%endfor%}
              </tbody>
            </table>
          </div>
        </div>
      </div>


      <!-- Promotions table -->
      <div id="promotions" class="tabcontent">
        <!--Promotions PRICE RANGE  DIALOG -->
        <div>
          <dialog id="DialogPromotionsPrice">
            <div class="modal-header">
              <h2 class="modal-title" id="exampleModalLabel">Choose Price Range</h2>
            </div>
            <p>
              <input type="text" id="PromotionsPriceAmount" readonly style="border:0; color:#000000; font-weight:bold;">
            </p>
            <div id="Promotions-slider-range"></div>
            <div class="modal-footer">
              <button id="PromotionsHide" class="btn btn-filters">Close</button>
              <button type="button" class="btn btn-filters">Apply</button>
            </div>
          </dialog>
        </div>
        <!--Promotions PRICE RINGE DIALOG -->

        <!--Promotions DATE RINGE DIALOG -->
        <div>
          <dialog id="DialogPromotionsDate">
            <div class="modal-header">
              <h2 class="modal-title" id="PromotionsDateModalLabel">Choose Date Range</h2>
            </div>
            From :
            <input type="date" name="party" min="2020-04-01" max="2025-04-30" />
            To :
            <input type="date" name="party" min="2020-04-01" max="2025-04-30" />
            <div class="modal-footer">
              <button id="PromotionsDateHide" class="btn btn-filters">Close</button>
              <button type="button" class="btn btn-filters">Apply</button>
            </div>
          </dialog>
        </div>
        <!--Promotions DATE RINGE DIALOG -->

        <!-- filtter buttons -->
        <p class='display-inline-block'>
          <button class="btn btn-filters">
            <span class="fa fa-download mr-3"></span>
            DOWNLOAD
          </button>

          <select class="btn btn-filters">
            <option>Operator</option>
            <option value="Omantel">Omantel</option>
            <option value="Ooredoo">Ooredoo</option>
            <option value="Vodafone">Vodafone</option>
            <option value="RedBull">RedBull</option>
            <option value="Renna">Renna</option>
          </select>

          <select class="btn btn-filters">
            <option>Single or Bundle</option>
            <option value="Single">Single</option>
            <option value="bundle">Bundle</option>
          </select>

          <select class="btn btn-filters">
            <option>Service Type</option>
            <option value="Mobile">Mobile</option>
            <option value="Broadband">Fixed Broadband</option>
          </select>

          <button id="PromotionsShow" type="button" class="btn btn-filters" data-toggle="modal"
            data-target="#PromotionsModal11" data-whatever="@mdo">Price Range
          </button>

          <button id="PromotionsDateShow" type="button" class="btn btn-filters" data-toggle="modal"
            data-target="#exampleModal2" data-whatever="@mdo">Date Range
          </button>
        </p>
        <!-- filtter buttons -->


        <div class="search-plan-table">
          <div class="table-responsive">
            <table class="table" cellspacing="0">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>
                    Plan Details
                  </th>
                  <th>
                    Price
                  </th>
                  <th>
                    Data Volume
                  </th>
                  <th>
                    Excess Data
                  </th>
                  <th>
                    International Minutes
                  </th>
                  <th>
                    Roaming Usage
                  </th>
                </tr>
              </thead>
              <tbody>
                {% for data in myresult %}
                <tr>
                  <td>2021-07-14</td>
                  <td>
                    <!-- Small output Choice -->
                    {{ data.0 }} sss
                  </td>
                  <td>
                    $45.00
                  </td>
                  <td>
                    <span>
                      20 GB (20 + 0) <br /> Data Sharing : Yes
                    </span>
                  </td>
                  <td>
                    <span> Data Type: UNL Shaped</span> <br />
                    <span>Data Cost : NA </span><br />
                    <span>Data Sharing : 1.5</span>

                  </td>
                  <td>
                    <span>
                      Zone One: PAYG
                    </span><br />
                    <span>
                      Zone 2 : NA
                    </span>
                  </td>
                  <td>
                    <span>
                      UNL/$10 Day Pass
                    </span>
                  </td>
                </tr>
                {% endfor %}

                <tr>
                  <td>2021-07-14</td>
                  <td>Medium output Choice</td>
                  <td>$55.00</td>
                  <td><span>80 GB (80 + 0) </span><br />
                    <span> Data Sharing : Yes </span>
                  </td>
                  <td>
                    <span> Data Type: UNL Shaped</span> <br />
                    <span>Data Cost : NA </span><br />
                    <span>Data Sharing : 1.5</span>
                  </td>
                  <td>
                    <span>
                      Zone One: PAYG
                    </span><br />
                    <span>
                      Zone 2 : NA
                    </span>
                  </td>
                  <td>
                    <span>
                      UNL/$10 Day Pass
                    </span>
                  </td>
                </tr>
                <tr>
                  <td>2021-07-14</td>
                  <td>Medium output Choice</td>
                  <td>$55.00</td>
                  <td><span>80 GB (80 + 0) </span><br />
                    <span> Data Sharing : Yes </span>
                  </td>
                  <td>
                    <span> Data Type: UNL Shaped</span> <br />
                    <span>Data Cost : NA </span><br />
                    <span>Data Sharing : 1.5</span>
                  </td>
                  <td>
                    <span>
                      Zone One: PAYG
                    </span><br />
                    <span>
                      Zone 2 : NA
                    </span>
                  </td>
                  <td>
                    <span>
                      UNL/$10 Day Pass
                    </span>
                  </td>
                </tr>
                <tr>
                  <td>2021-07-14</td>
                  <td>Medium output Choice</td>
                  <td>$55.00</td>
                  <td><span>80 GB (80 + 0) </span><br />
                    <span> Data Sharing : Yes </span>
                  </td>
                  <td>
                    <span> Data Type: UNL Shaped</span> <br />
                    <span>Data Cost : NA </span><br />
                    <span>Data Sharing : 1.5</span>
                  </td>
                  <td>
                    <span>
                      Zone One: PAYG
                    </span><br />
                    <span>
                      Zone 2 : NA
                    </span>
                  </td>
                  <td>
                    <span>
                      UNL/$10 Day Pass
                    </span>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
  </section>
</body>

<script>

  // tab function start
  function openTab(evt, tabName) {
    var i, tabcontent, tablinks;
    tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
      tabcontent[i].style.display = "none";
    }
    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
      tablinks[i].className = tablinks[i].className.replace(" active", "");
    }
    document.getElementById(tabName).style.display = "block";
    evt.currentTarget.className += " active";
  }

  document.getElementById("defaultOpen").click();
  // tab function end

  //plan price range dialog function
  (function () { var dialog = document.getElementById('DialogExample'); document.getElementById('show').onclick = function () { dialog.show(); }; document.getElementById('hide').onclick = function () { dialog.close(); }; })();

  //plan date range dialog
  (function () { var dateDialog = document.getElementById('DialogDate'); document.getElementById('dateShow').onclick = function () { dateDialog.show(); }; document.getElementById('dateHide').onclick = function () { dateDialog.close(); }; })();

  //Promotions price range dialog
  (function () { var PromotionsPriceDialog = document.getElementById('DialogPromotionsPrice'); document.getElementById('PromotionsShow').onclick = function () { PromotionsPriceDialog.show(); }; document.getElementById('PromotionsHide').onclick = function () { PromotionsPriceDialog.close(); }; })();

  //Promotions date range dialog
  (function () { var PromotionsDateDialog = document.getElementById('DialogPromotionsDate'); document.getElementById('PromotionsDateShow').onclick = function () { PromotionsDateDialog.show(); }; document.getElementById('PromotionsDateHide').onclick = function () { PromotionsDateDialog.close(); }; })();

  // price range function
  $(function () {
    $("#slider-range").slider({
      range: true,
      min: 0,
      max: 100,
      values: [30, 85],
      slide: function (event, ui) {
        $("#amount").val("OMR " + ui.values[0] + " - OMR " + ui.values[1]);
      }
    });
    $("#amount").val("OMR " + $("#slider-range").slider("values", 0) +
      " - OMR " + $("#slider-range").slider("values", 1));
  });

  // Promotions price range function
  $(function () {
    $("#Promotions-slider-range").slider({
      range: true,
      min: 0,
      max: 100,
      values: [30, 85],
      slide: function (event, ui) {
        $("#PromotionsPriceAmount").val("OMR " + ui.values[0] + " - OMR " + ui.values[1]);
      }
    });
    $("#PromotionsPriceAmount").val("OMR " + $("#Promotions-slider-range").slider("values", 0) +
      " - OMR " + $("#Promotions-slider-range").slider("values", 1));
  });

  // date range function
  $(function () {
    $('input[name="daterange"]').daterangepicker({
      opens: 'left'
    }, function (start, end, label) {
      console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
    });
  });
</script>

</html>